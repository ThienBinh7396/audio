{"remainingRequest":"/home/thien/Documents/Tutorials/NodeJs/audio/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/thien/Documents/Tutorials/NodeJs/audio/src/views/pages/Story.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/thien/Documents/Tutorials/NodeJs/audio/src/views/pages/Story.vue","mtime":1579750206000},{"path":"/home/thien/Documents/Tutorials/NodeJs/audio/node_modules/cache-loader/dist/cjs.js","mtime":1601544776771},{"path":"/home/thien/Documents/Tutorials/NodeJs/audio/node_modules/babel-loader/lib/index.js","mtime":1596448970406},{"path":"/home/thien/Documents/Tutorials/NodeJs/audio/node_modules/cache-loader/dist/cjs.js","mtime":1601544776771},{"path":"/home/thien/Documents/Tutorials/NodeJs/audio/node_modules/vue-loader/lib/index.js","mtime":1604375615900}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgew0KICAgIG1hcE11dGF0aW9ucywNCiAgICBtYXBBY3Rpb25zLA0KICAgIG1hcFN0YXRlDQp9IGZyb20gJ3Z1ZXgnOw0KDQpleHBvcnQgZGVmYXVsdCB7DQogICAgY29tcG9uZW50czogew0KICAgICAgICBDaGFwdGVyOiAoKSA9Pg0KICAgICAgICAgICAgaW1wb3J0KCdAL3ZpZXdzL3BhcnRpYWxzL0NoYXB0ZXJzJyksDQogICAgfSwNCiAgICBkYXRhKCkgew0KICAgICAgICByZXR1cm4gew0KICAgICAgICAgICAgY2hhcHM6IFtdLA0KICAgICAgICAgICAgcmVzdWx0U2VhcmNoOiBbXSwNCiAgICAgICAgICAgIGxvYWRpbmc6IHRydWUsDQogICAgICAgICAgICBjdXJyZW50c3Rvcnk6IHsNCiAgICAgICAgICAgICAgICBuYW1lOiAnJywNCiAgICAgICAgICAgICAgICBpZDogLTEsDQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgdGFiOiAwLA0KICAgICAgICB9DQogICAgfSwNCiAgICBjcmVhdGVkKCkgew0KDQogICAgICAgIHRoaXMuaW5pdCgpOw0KICAgIH0sDQogICAgY29tcHV0ZWQ6IHsNCiAgICAgICAgLi4ubWFwU3RhdGUoJ2FwcCcsIFsncmVjZW50U3RvcmllcycsICdkZXRlY3RNb2JpbGUnXSkNCiAgICB9LA0KICAgIHdhdGNoOiB7DQogICAgICAgICRyb3V0ZTogZnVuY3Rpb24gKHZhbCkgew0KICAgICAgICAgICAgdGhpcy5pbml0KCk7DQogICAgICAgIH0NCiAgICB9LA0KICAgIG1ldGhvZHM6IHsNCiAgICAgICAgLi4ubWFwTXV0YXRpb25zKCdhcHAnLCBbJ3NldE5hdicsICdzZXRUb3BCYWNrZ3JvdW5kJ10pLA0KICAgICAgICAuLi5tYXBBY3Rpb25zKCdhcHAnLCBbJ3Nob3dUb2FzdCddKSwNCg0KICAgICAgICBpbml0OiBmdW5jdGlvbiAoKSB7DQoNCiAgICAgICAgICAgIHRoaXMuY3VycmVudHN0b3J5LmlkID0gTnVtYmVyKHRoaXMuJHJvdXRlLnBhcmFtcy5zdG9yeUlkKTsNCiAgICAgICAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7DQoNCiAgICAgICAgICAgIHRoaXMuJGF4aW9zLmdldCgnc3RvcnkvaW5mbycsIHsNCiAgICAgICAgICAgICAgICAgICAgcGFyYW1zOiB7DQogICAgICAgICAgICAgICAgICAgICAgICBpZF9zdG9yeTogdGhpcy5jdXJyZW50c3RvcnkuaWQNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgLnRoZW4ocnMgPT4gew0KICAgICAgICAgICAgICAgICAgICBsZXQgew0KICAgICAgICAgICAgICAgICAgICAgICAgZGF0YQ0KICAgICAgICAgICAgICAgICAgICB9ID0gcnM7DQoNCiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEudHlwZSA9PSAnZXJyb3InKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dUb2FzdCh7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogZGF0YS50eXBlLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IGRhdGEubWVzc2FnZQ0KICAgICAgICAgICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvNDA0Jyk7DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICBsZXQgaW5kZXggPSB0aGlzLnJlY2VudFN0b3JpZXMuZmluZEluZGV4KGl0ID0+IGl0LmlkID09IHRoaXMuY3VycmVudHN0b3J5LmlkKTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHJlY2VudENoYXB0ZXIgPSBpbmRleCA8IDAgfHwgIXRoaXMucmVjZW50U3Rvcmllc1tpbmRleF0ucmVjZW50Q2hhcHRlciA/IG51bGwgOiB0aGlzLnJlY2VudFN0b3JpZXNbaW5kZXhdLnJlY2VudENoYXB0ZXI7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEuZGF0YS5yZWNlbnRDaGFwdGVyID0gcmVjZW50Q2hhcHRlcjsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50c3RvcnkgPSBkYXRhLmRhdGE7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0TmF2KFt7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6ICcvJywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogJ1RyYW5nIGNo4bunJw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBgYCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogdGhpcy5jdXJyZW50c3RvcnkubmFtZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIF0pOw0KDQogICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgIC5jYXRjaChlcnIgPT4gew0KDQogICAgICAgICAgICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOw0KDQogICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd1RvYXN0KHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdlcnJvcicsDQogICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiAnU29tZXRoaW5nIHdlbnQgd3JvbmchJw0KICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy80MDQnKTsNCiAgICAgICAgICAgICAgICB9KQ0KDQogICAgICAgIH0sDQogICAgICAgIGdldEltYWdlVXJsOiBmdW5jdGlvbiAoaW1hZ2UpIHsNCiAgICAgICAgICAgIHJldHVybiBpbWFnZVVybChpbWFnZSk7DQogICAgICAgIH0sDQogICAgICAgIGdldENoYXB0ZXJzOiBmdW5jdGlvbiAoY2hhcHMpIHsNCiAgICAgICAgICAgIHRoaXMuY2hhcHMgPSBjaGFwczsNCiAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuY2hhcHMubGVuZ3RoKTsNCiAgICAgICAgfSwNCiAgICAgICAgdG9GaXJzdENoYXB0ZXI6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIGxldCBpbmRleCA9IHRoaXMuY2hhcHMuZmluZEluZGV4KGl0ID0+IGl0LnR5cGUgIT0gJ2RpdmlkZXInKTsNCg0KICAgICAgICAgICAgaWYgKGluZGV4ID49IDApIHRoaXMuJHJvdXRlci5wdXNoKGAvcmVhZC9zdG9yeS8ke3RoaXMuY3VycmVudHN0b3J5LnN0b3J5X3VybH0vJHt0aGlzLmNoYXBzW2luZGV4XS5ocmVmfS8ke3RoaXMuY2hhcHNbaW5kZXhdLmNoYXB0ZXJJZH1gKTsNCiAgICAgICAgfQ0KICAgIH0NCn0NCg=="},{"version":3,"sources":["Story.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2FA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"Story.vue","sourceRoot":"src/views/pages","sourcesContent":["<template>\r\n<v-container>\r\n    <loading-icon w=\"82\" margin=\"120px auto 0\" v-if=\"loading\"></loading-icon>\r\n\r\n    <v-row>\r\n        <v-col>\r\n            <div class=\"mobile-action\" v-if=\"detectMobile\">\r\n                <div class=\"button-audio-control\">\r\n                    <v-btn class=\"size-default \" color=\"#2740e0\" dark fab @click.stop=\"startSpeak()\">\r\n                        <div @click.stop=\"$store.commit('app/setShowSearch', true)\">\r\n                            <v-icon class=\"ld ld-tremble\">mdi-magnify</v-icon>\r\n                        </div>\r\n                    </v-btn>\r\n                </div>\r\n            </div>\r\n        </v-col>\r\n    </v-row>\r\n\r\n    <v-row v-if=\"!loading\">\r\n        <v-col cols=\"12\">\r\n            <div class=\"story-info\">\r\n                <div class=\"story-image\">\r\n                    <div class=\"image\" :style=\"{'background-image': `url('${getImageUrl(currentstory.image)}')`}\" />\r\n                </div>\r\n                <div class=\"story-more-info\">\r\n                    <h1>{{currentstory.name}}</h1>\r\n                    <div class=\"mt-4\">\r\n                        <v-chip color=\"#bababa\" outlined small>{{currentstory.author ? currentstory.author : currentstory.name}}</v-chip>\r\n                    </div>\r\n                    <div class=\"story-intro mt-3\">\r\n                        <div class=\"fs-13 text-truncate pr-4\">{{currentstory.introduce}}</div>\r\n                    </div>\r\n                    <div class=\"story-count-chapter mt-1\">\r\n                        <span class=\"fs-24\">{{currentstory.count_chapter}}</span>\r\n                        <span class=\"fs-13\"> Chương</span>\r\n                    </div>\r\n                    <div class=\"story-interact mt-8 mt-sm-5\">\r\n                        <v-btn color=\"#BF2C24\" tile @click=\"toFirstChapter()\" :loading=\"chaps.length == 0\">Đọc từ đầu</v-btn>\r\n                        <v-btn color=\"#BF2C24\" outlined tile class=\"ml-3\" :to=\"`/read/story/${currentstory.story_url}/${currentstory.recentChapter.href}/${currentstory.recentChapter.id}`\" v-if=\"currentstory.recentChapter\">Đọc tiếp</v-btn>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <v-row>\r\n                <v-col>\r\n                    <v-tabs class=\"mt-6 no-arrow tab-no-uppercase\" v-model=\"tab\" background-color=\"transparent\" color=\"#ed4259\">\r\n                        <v-tab>\r\n                            Thông tin chi tiết\r\n                        </v-tab>\r\n                        <v-tab>\r\n                            Danh sách chương ({{currentstory.count_chapter}})\r\n                        </v-tab>\r\n                    </v-tabs>\r\n                    <transition-group name=\"fade\" mode=\"out-in\">\r\n                        <div class=\"mt-8 story-intro tab-window\" key=\"tab-0\" v-show=\"tab == 0\">\r\n                            {{currentstory.introduce}}\r\n                            <v-divider class=\"mt-6\" />\r\n                            <div class=\"story-lastest-chapter mt-1 text-truncate\" v-if=\"currentstory.recentChapter\">\r\n                                <span class=\"mr-8 label\">Đọc gần đây:</span>\r\n                                <span class=\"content text-truncate\">\r\n\r\n                                    <router-link :to=\"`/read/story/${currentstory.story_url}/${currentstory.recentChapter.href}/${currentstory.recentChapter.id}`\">{{currentstory.recentChapter.title}}</router-link>\r\n                                </span>\r\n                            </div>\r\n                            <div class=\"story-lastest-chapter mt-1 text-truncate\">\r\n                                <span class=\"mr-8 label\">Mới nhất:</span>\r\n                                <span class=\"content text-truncate\">\r\n\r\n                                    <router-link :to=\"`/read/story/${currentstory.story_url}/${currentstory.chapter_new.url}/${currentstory.chapter_new.id}`\">{{currentstory.chapter_new.name_id_chapter}}: {{currentstory.chapter_new.content_title_of_chapter}}</router-link>\r\n                                    <span class=\"ml-6 time \" v-if=\"!detectMobile\">{{currentstory.chapter_new.time_create}}</span>\r\n                                </span>\r\n                            </div>\r\n                            <div class=\"story-lastest-chapter mt-1 text-truncate\">\r\n                                <span class=\"mr-8 label\">Tình trạng:</span>\r\n                                <span class=\"content\">\r\n                                    <v-chip dense small :color=\"`${currentstory.finish == 1 ? 'green' : '#096ab7'}`\">{{currentstory.finish ? 'Hoàn thành' : 'Đang ra'}}</v-chip>\r\n                                </span>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"mt-8 tab-window\" key=\"tab-1\" v-show=\"tab == 1\">\r\n                            <chapter @getChapter=\"getChapters\" :story_id=\"this.currentstory.id\" :story_url=\"currentstory.story_url\" v-if=\"!loading\" />\r\n                        </div>\r\n                    </transition-group>\r\n                </v-col>\r\n            </v-row>\r\n        </v-col>\r\n    </v-row>\r\n\r\n</v-container>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n    mapMutations,\r\n    mapActions,\r\n    mapState\r\n} from 'vuex';\r\n\r\nexport default {\r\n    components: {\r\n        Chapter: () =>\r\n            import('@/views/partials/Chapters'),\r\n    },\r\n    data() {\r\n        return {\r\n            chaps: [],\r\n            resultSearch: [],\r\n            loading: true,\r\n            currentstory: {\r\n                name: '',\r\n                id: -1,\r\n            },\r\n            tab: 0,\r\n        }\r\n    },\r\n    created() {\r\n\r\n        this.init();\r\n    },\r\n    computed: {\r\n        ...mapState('app', ['recentStories', 'detectMobile'])\r\n    },\r\n    watch: {\r\n        $route: function (val) {\r\n            this.init();\r\n        }\r\n    },\r\n    methods: {\r\n        ...mapMutations('app', ['setNav', 'setTopBackground']),\r\n        ...mapActions('app', ['showToast']),\r\n\r\n        init: function () {\r\n\r\n            this.currentstory.id = Number(this.$route.params.storyId);\r\n            this.loading = true;\r\n\r\n            this.$axios.get('story/info', {\r\n                    params: {\r\n                        id_story: this.currentstory.id\r\n                    }\r\n                })\r\n                .then(rs => {\r\n                    let {\r\n                        data\r\n                    } = rs;\r\n\r\n                    if (data.type == 'error') {\r\n                        this.showToast({\r\n                            type: data.type,\r\n                            text: data.message\r\n                        });\r\n\r\n                        this.$router.push('/404');\r\n                        return;\r\n                    } else {\r\n                        let index = this.recentStories.findIndex(it => it.id == this.currentstory.id);\r\n\r\n                        let recentChapter = index < 0 || !this.recentStories[index].recentChapter ? null : this.recentStories[index].recentChapter;\r\n\r\n                        data.data.recentChapter = recentChapter;\r\n\r\n                        this.currentstory = data.data;\r\n\r\n                        this.setNav([{\r\n                                path: '/',\r\n                                text: 'Trang chủ'\r\n                            },\r\n                            {\r\n                                path: ``,\r\n                                text: this.currentstory.name\r\n                            }\r\n                        ]);\r\n\r\n                    }\r\n\r\n                    this.loading = false;\r\n                })\r\n                .catch(err => {\r\n\r\n                    this.loading = false;\r\n\r\n                    this.showToast({\r\n                        type: 'error',\r\n                        text: 'Something went wrong!'\r\n                    });\r\n                    this.$router.push('/404');\r\n                })\r\n\r\n        },\r\n        getImageUrl: function (image) {\r\n            return imageUrl(image);\r\n        },\r\n        getChapters: function (chaps) {\r\n            this.chaps = chaps;\r\n            console.log(this.chaps.length);\r\n        },\r\n        toFirstChapter: function () {\r\n            let index = this.chaps.findIndex(it => it.type != 'divider');\r\n\r\n            if (index >= 0) this.$router.push(`/read/story/${this.currentstory.story_url}/${this.chaps[index].href}/${this.chaps[index].chapterId}`);\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.tab-window {\r\n    min-height: 240px;\r\n    overflow-x: hidden;\r\n}\r\n</style>\r\n"]}]}